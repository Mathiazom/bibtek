@startuml
title Sequence diagram for adding a book to your library
Actor Actor
participant LibraryController
participant AddBookController
participant StorageHandler


Actor -> LibraryController: "clicks button to add book" -> handleAddBook()
LibraryController -> AddBookController: update(user)
LibraryController --> Actor: Opens "Add new book" page

alt add Book Manually
    note left of Actor: Enter Book title, author, year published, \n enter image (optional), enter \n reading state and date added

else add Book with ISBN
    Actor -> AddBookController: "Clicks ISBN button" -> toggleShowISBNInput
    AddBookController --> Actor: Show ISBN input field
    note left of Actor: ISBN number of book is entered
    Actor -> AddBookController: "Clicks add book by ISBN button" -> handleLoadBookFromISBNInput()
    alt successful ISBN Number
        Actor <-- AddBookController: Fills corresponding title, author and year published to ISBN number
   else invalid ISBN
        Actor <- AddBookController: "Looks like an invalid ISBN"
    else no search results for that ISBN
        Actor <- AddBookController: "Looks like an invalid ISBN :("

end
end
    Actor -> AddBookController: "Clicks confirm book info button" -> handleAddBook()
    note right of AddBookController: updates the user \nobject in \nAddBookConroller \nwith  the new book
    AddBookController -> StorageHandler: updateUser(user)
    AddBookController -> AddBookController: handleShowLibrary()
    LibraryController <- AddBookController: update(user)
    AddBookController --> Actor: Shows the users\n library, with the added book

note left of Actor: Finsihed adding book

@enduml